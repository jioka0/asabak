<!-- Tailwind Configuration Script -->
<script>
tailwind.config = {
  darkMode: 'class',
  theme: {
    extend: {
      fontFamily: {
        'syne': ['Syne', 'sans-serif'],
      },
      colors: {
        'base': 'var(--base)',
        'base-tint': 'var(--base-tint)',
        'base-shade': 'var(--base-shade)',
        'accent': 'var(--accent)',
        'secondary': 'var(--secondary)',
        'secondary-rgba': 'var(--secondary-rgba)',
        'stroke-controls': 'var(--stroke-controls)',
        'stroke-elements': 'var(--stroke-elements)',
        't-bright': 'var(--t-bright)',
        't-medium': 'var(--t-medium)',
        't-muted': 'var(--t-muted)',
        't-accent': 'var(--t-accent)',
        't-secondary': 'var(--t-secondary)',
        't-disabled': 'var(--t-disabled)',
        't-placeholder': 'var(--t-placeholder)',
        'base-opp': 'var(--base-opp)',
        't-opp-bright': 'var(--t-opp-bright)',
        't-opp-medium': 'var(--t-opp-medium)',
        't-opp-muted': 'var(--t-opp-muted)',
        'gradient-one': 'var(--gradient-one)',
        'gradient-two': 'var(--gradient-two)',
        'gradient-three': 'var(--gradient-three)',
      },
      borderRadius: {
        's': 'var(--_radius-s)',
        'm': 'var(--_radius-m)',
        'l': 'var(--_radius-l)',
        'xl': 'var(--_radius-xl)',
      },
      animation: {
        'fade-in': 'fadeIn 0.6s ease-out forwards',
        'slide-up': 'slideUp 0.6s ease-out forwards',
        'scale-in': 'scaleIn 0.4s ease-out forwards',
      },
      transitionTimingFunction: {
        'bezier': 'var(--_animbezier)',
      },
      transitionDuration: {
        'fast': 'var(--_animspeed-fast)',
        'medium': 'var(--_animspeed-medium)',
        'slow': 'var(--_animspeed-slow)',
      },
    },
  },
}
</script>

<!-- Retro Blog Posts Explorer - Windows File Explorer with Retro CRT Style -->
<div class="retro-posts-container">
    <!-- Retro CRT Header -->
    <div class="retro-header">
        <div class="retro-title-bar">
            <div class="retro-title-left">
                <div class="retro-title-icon">üìÅ</div>
                <h2 class="retro-title">BLOG POSTS EXPLORER v2.1</h2>
            </div>
            <div class="retro-title-right">
                <button class="retro-window-btn retro-minimize" onclick="minimizeWindow()" title="Minimize">
                    <span>_</span>
                </button>
                <button class="retro-window-btn retro-maximize" onclick="maximizeWindow()" title="Maximize">
                    <span>‚ñ°</span>
                </button>
                <button class="retro-window-btn retro-close" onclick="closeWindow()" title="Close">
                    <span>√ó</span>
                </button>
            </div>
        </div>
        <div class="retro-menu-bar">
            <div class="retro-menu-item active">FILE</div>
            <div class="retro-menu-item">EDIT</div>
            <div class="retro-menu-item">VIEW</div>
            <div class="retro-menu-item">TOOLS</div>
            <div class="retro-menu-item">HELP</div>
        </div>
    </div>

    <!-- Retro Toolbar -->
    <div class="retro-toolbar">
        <div class="retro-toolbar-section">
            <button class="retro-toolbar-btn" onclick="newPost()">NEW POST</button>
            <button class="retro-toolbar-btn" onclick="openPost()">OPEN</button>
            <button class="retro-toolbar-btn" onclick="deleteSelected()">DELETE</button>
        </div>
        <div class="retro-toolbar-separator"></div>
        <div class="retro-toolbar-section">
            <button class="retro-toolbar-btn" onclick="cutItems()">CUT</button>
            <button class="retro-toolbar-btn" onclick="copyItems()">COPY</button>
            <button class="retro-toolbar-btn" onclick="pasteItems()">PASTE</button>
        </div>
        <div class="retro-toolbar-separator"></div>
        <div class="retro-toolbar-section">
            <button class="retro-toolbar-btn" onclick="refreshView()">REFRESH</button>
            <button class="retro-toolbar-btn" onclick="showProperties()">PROPERTIES</button>
        </div>
    </div>

    <!-- Retro Navigation Bar -->
    <div class="retro-nav-bar">
        <div class="retro-nav-controls">
            <button class="retro-nav-btn" onclick="goBack()" title="Back">‚óÄ</button>
            <button class="retro-nav-btn" onclick="goForward()" title="Forward">‚ñ∂</button>
            <button class="retro-nav-btn" onclick="goUp()" title="Up">‚Üë</button>
            <div class="retro-nav-separator"></div>
            <div class="retro-path-bar">
                <span class="retro-path-text">BLOG POSTS</span>
                <span class="retro-path-separator">\\</span>
                <span class="retro-path-text">ALL POSTS</span>
            </div>
        </div>
        <div class="retro-nav-controls">
            <input type="text" class="retro-search-input" placeholder="SEARCH POSTS..." id="searchInput">
            <div class="retro-view-controls">
                <button class="retro-view-btn" onclick="setViewMode('large-icons')" title="Large Icons">L</button>
                <button class="retro-view-btn" onclick="setViewMode('medium-icons')" title="Medium Icons">M</button>
                <button class="retro-view-btn active" onclick="setViewMode('list')" title="List">S</button>
                <button class="retro-view-btn" onclick="setViewMode('details')" title="Details">D</button>
            </div>
        </div>
    </div>

    <!-- Main Retro Interface -->
    <div class="retro-main-panel">
        <!-- Left Sidebar - Quick Actions -->
        <div class="retro-sidebar">
            <div class="retro-panel-title">FOLDERS</div>
            <div class="retro-tree-view">
                <!-- All Posts -->
                <div class="retro-tree-item active" data-folder="all">
                    <div class="retro-tree-content">
                        <i class="retro-tree-icon">üìÑ</i>
                        <span class="retro-tree-text">ALL POSTS</span>
                        <span class="retro-tree-count" id="allPostsCount">24</span>
                    </div>
                </div>

                <!-- Categories -->
                <div class="retro-tree-item" onclick="toggleTreeItem(this)">
                    <div class="retro-tree-content">
                        <i class="retro-tree-icon">üìÇ</i>
                        <span class="retro-tree-text">CATEGORIES</span>
                        <i class="retro-tree-arrow">‚ñ∂</i>
                    </div>
                    <div class="retro-tree-children hidden" id="categoriesTree">
                        <!-- Categories will be populated here -->
                    </div>
                </div>

                <!-- Tags -->
                <div class="retro-tree-item" onclick="toggleTreeItem(this)">
                    <div class="retro-tree-content">
                        <i class="retro-tree-icon">üè∑Ô∏è</i>
                        <span class="retro-tree-text">TAGS</span>
                        <i class="retro-tree-arrow">‚ñ∂</i>
                    </div>
                    <div class="retro-tree-children hidden" id="tagsTree">
                        <!-- Tags will be populated here -->
                    </div>
                </div>

                <!-- Status -->
                <div class="retro-tree-item" onclick="toggleTreeItem(this)">
                    <div class="retro-tree-content">
                        <i class="retro-tree-icon">‚öôÔ∏è</i>
                        <span class="retro-tree-text">STATUS</span>
                        <i class="retro-tree-arrow">‚ñ∂</i>
                    </div>
                    <div class="retro-tree-children" id="statusTree">
                        <div class="retro-tree-item" data-filter="status-published">
                            <div class="retro-tree-content">
                                <i class="retro-tree-icon">‚úÖ</i>
                                <span class="retro-tree-text">PUBLISHED</span>
                                <span class="retro-tree-count" id="publishedCount">18</span>
                            </div>
                        </div>
                        <div class="retro-tree-item" data-filter="status-draft">
                            <div class="retro-tree-content">
                                <i class="retro-tree-icon">üìù</i>
                                <span class="retro-tree-text">DRAFT</span>
                                <span class="retro-tree-count" id="draftCount">4</span>
                            </div>
                        </div>
                        <div class="retro-tree-item" data-filter="status-scheduled">
                            <div class="retro-tree-content">
                                <i class="retro-tree-icon">‚è∞</i>
                                <span class="retro-tree-text">SCHEDULED</span>
                                <span class="retro-tree-count" id="scheduledCount">2</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar Footer -->
            <div class="retro-sidebar-footer">
                <div class="retro-stats-item">
                    <span class="retro-stats-label">TOTAL POSTS:</span>
                    <span class="retro-stats-value" id="totalPostsCount">24</span>
                </div>
                <div class="retro-stats-item">
                    <span class="retro-stats-label">SELECTED:</span>
                    <span class="retro-stats-value" id="selectedCount">0</span>
                </div>
            </div>
        </div>

        <!-- Right Panel - Posts List -->
        <div class="retro-content-panel">
            <!-- Status Bar -->
            <div class="retro-status-bar">
                <div class="retro-status-left">
                    <span id="itemsCount">24 items</span>
                    <span id="selectedItemsInfo">0 selected</span>
                </div>
                <div class="retro-status-right">
                    <span id="sortInfo">SORTED BY NAME</span>
                    <span id="viewInfo">LIST VIEW</span>
                </div>
            </div>

            <!-- Posts List -->
            <div class="retro-posts-list">
                <!-- Header -->
                <div class="retro-list-header">
                    <div class="retro-col-select">
                        <input type="checkbox" class="retro-checkbox" id="selectAll">
                        <label for="selectAll" class="retro-checkbox-label"></label>
                    </div>
                    <div class="retro-col-title">NAME</div>
                    <div class="retro-col-status">STATUS</div>
                    <div class="retro-col-modified">MODIFIED</div>
                    <div class="retro-col-size">SIZE</div>
                </div>

                <!-- Posts Items -->
                <div id="postsList" class="retro-posts-items">
                    <!-- Posts will be populated here -->
                </div>
            </div>

            <!-- Other view modes (hidden by default) -->
            <div class="retro-posts-grid large-icons-view hidden" id="largeIconsView">
                <div class="retro-grid-container" id="largeIconsGrid">
                    <!-- Large icons will be populated here -->
                </div>
            </div>

            <div class="retro-posts-grid medium-icons-view hidden" id="mediumIconsView">
                <div class="retro-grid-container" id="mediumIconsGrid">
                    <!-- Medium icons will be populated here -->
                </div>
            </div>

            <div class="retro-posts-list details-view hidden" id="detailsView">
                <!-- Details view header -->
                <div class="retro-list-header">
                    <div class="retro-col-select">
                        <input type="checkbox" class="retro-checkbox">
                        <label class="retro-checkbox-label"></label>
                    </div>
                    <div class="retro-col-name">NAME</div>
                    <div class="retro-col-status">STATUS</div>
                    <div class="retro-col-category">CATEGORY</div>
                    <div class="retro-col-author">AUTHOR</div>
                    <div class="retro-col-views">VIEWS</div>
                    <div class="retro-col-modified">MODIFIED</div>
                </div>
                <div id="postsDetails" class="retro-posts-items">
                    <!-- Details will be populated here -->
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Retro Context Menu -->
<div class="retro-context-menu hidden" id="contextMenu">
    <div class="retro-context-header">POST OPTIONS</div>
    <div class="retro-context-item" onclick="openPost()">
        <span class="retro-context-icon">üìÇ</span>
        <span class="retro-context-text">OPEN</span>
    </div>
    <div class="retro-context-item" onclick="editPost()">
        <span class="retro-context-icon">‚úèÔ∏è</span>
        <span class="retro-context-text">EDIT</span>
    </div>
    <div class="retro-context-item" onclick="duplicatePost()">
        <span class="retro-context-icon">üìã</span>
        <span class="retro-context-text">DUPLICATE</span>
    </div>
    <div class="retro-context-separator"></div>
    <div class="retro-context-item" onclick="cutItems()">
        <span class="retro-context-icon">‚úÇÔ∏è</span>
        <span class="retro-context-text">CUT</span>
    </div>
    <div class="retro-context-item" onclick="copyItems()">
        <span class="retro-context-icon">üìã</span>
        <span class="retro-context-text">COPY</span>
    </div>
    <div class="retro-context-separator"></div>
    <div class="retro-context-item retro-context-danger" onclick="deleteSelected()">
        <span class="retro-context-icon">üóëÔ∏è</span>
        <span class="retro-context-text">DELETE</span>
    </div>
    <div class="retro-context-item" onclick="showProperties()">
        <span class="retro-context-icon">‚ÑπÔ∏è</span>
        <span class="retro-context-text">PROPERTIES</span>
    </div>
</div>

<!-- Retro CSS Styles - Scoped to posts page only -->
<style>
/* Retro Posts Container */
.retro-posts-container {
    font-family: 'Courier New', monospace;
    background: linear-gradient(145deg, #0a0a0a, #1a1a1a);
    color: #00ff00;
    padding: 0;
    margin: 0;
    border: 2px solid #00ff00;
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
    overflow: hidden;
    min-height: 600px;
    font-size: 14px;
    line-height: 1.4;
    position: relative;
}

/* Retro CRT Effects */
.retro-posts-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(transparent 50%, rgba(0, 255, 0, 0.03) 50%);
    background-size: 100% 4px;
    pointer-events: none;
    z-index: 1;
}

.retro-posts-container * {
    box-sizing: border-box;
    position: relative;
    z-index: 2;
}

/* Retro Header */
.retro-header {
    background: linear-gradient(90deg, #0f0f0f, #1f1f1f);
    border-bottom: 1px solid #00ff00;
    padding: 8px 12px;
}

.retro-title-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.retro-title-left {
    display: flex;
    align-items: center;
    gap: 8px;
}

.retro-title-icon {
    font-size: 16px;
}

.retro-title {
    font-size: 16px;
    font-weight: bold;
    color: #00ff00;
    text-shadow: 0 0 8px #00ff00;
    margin: 0;
}

.retro-title-right {
    display: flex;
    gap: 4px;
}

.retro-window-btn {
    width: 20px;
    height: 20px;
    border: 1px solid #333;
    background: #0a0a0a;
    color: #00ff00;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
    transition: all 0.2s;
}

.retro-window-btn:hover {
    background: #00ff00;
    color: #000;
}

.retro-close:hover {
    background: #ff0000;
    color: #fff;
}

.retro-menu-bar {
    display: flex;
    gap: 16px;
}

.retro-menu-item {
    font-size: 12px;
    color: #888;
    cursor: pointer;
    padding: 4px 8px;
    border: 1px solid transparent;
    transition: all 0.2s;
}

.retro-menu-item:hover,
.retro-menu-item.active {
    color: #00ff00;
    border-color: #00ff00;
    background: rgba(0, 255, 0, 0.1);
}

/* Retro Toolbar */
.retro-toolbar {
    display: flex;
    align-items: center;
    background: #0a0a0a;
    border-bottom: 1px solid #00ff00;
    padding: 8px 12px;
    gap: 12px;
}

.retro-toolbar-section {
    display: flex;
    gap: 4px;
}

.retro-toolbar-btn {
    background: transparent;
    border: 1px solid #333;
    color: #00ff00;
    padding: 4px 8px;
    cursor: pointer;
    font-family: inherit;
    font-size: 11px;
    transition: all 0.2s;
}

.retro-toolbar-btn:hover {
    border-color: #00ff00;
    background: rgba(0, 255, 0, 0.1);
}

.retro-toolbar-separator {
    width: 1px;
    height: 20px;
    background: #333;
}

/* Retro Navigation Bar */
.retro-nav-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #0f0f0f;
    border-bottom: 1px solid #333;
    padding: 8px 12px;
}

.retro-nav-controls {
    display: flex;
    align-items: center;
    gap: 8px;
}

.retro-nav-btn {
    width: 24px;
    height: 24px;
    background: #0a0a0a;
    border: 1px solid #333;
    color: #00ff00;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    transition: all 0.2s;
}

.retro-nav-btn:hover {
    border-color: #00ff00;
    background: rgba(0, 255, 0, 0.1);
}

.retro-nav-separator {
    width: 1px;
    height: 20px;
    background: #333;
    margin: 0 8px;
}

.retro-path-bar {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 11px;
    color: #00ff00;
}

.retro-path-separator {
    color: #888;
}

.retro-search-input {
    background: #0a0a0a;
    border: 1px solid #333;
    color: #00ff00;
    padding: 4px 8px;
    font-family: inherit;
    font-size: 11px;
    width: 200px;
}

.retro-search-input:focus {
    border-color: #00ff00;
    outline: none;
}

.retro-view-controls {
    display: flex;
    border: 1px solid #333;
}

.retro-view-btn {
    width: 24px;
    height: 24px;
    background: #0a0a0a;
    border: none;
    color: #888;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    font-weight: bold;
    transition: all 0.2s;
}

.retro-view-btn:hover,
.retro-view-btn.active {
    color: #00ff00;
    background: rgba(0, 255, 0, 0.1);
}

/* Main Panel */
.retro-main-panel {
    display: flex;
    min-height: 500px;
}

/* Sidebar */
.retro-sidebar {
    width: 220px;
    background: #0a0a0a;
    border-right: 1px solid #00ff00;
    display: flex;
    flex-direction: column;
}

.retro-panel-title {
    font-size: 11px;
    color: #00ff00;
    font-weight: bold;
    padding: 8px 12px;
    border-bottom: 1px solid #00ff00;
    text-transform: uppercase;
}

.retro-tree-view {
    flex: 1;
    padding: 8px;
    overflow-y: auto;
}

.retro-tree-item {
    cursor: pointer;
    margin-bottom: 2px;
}

.retro-tree-item.active {
    background: rgba(0, 255, 0, 0.1);
}

.retro-tree-item:hover {
    background: rgba(0, 255, 0, 0.05);
}

.retro-tree-content {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 6px;
    font-size: 11px;
}

.retro-tree-icon {
    font-size: 12px;
    width: 12px;
    text-align: center;
}

.retro-tree-text {
    color: #00ff00;
    flex: 1;
}

.retro-tree-arrow {
    font-size: 8px;
    color: #888;
    transition: transform 0.2s;
}

.retro-tree-item.expanded .retro-tree-arrow {
    transform: rotate(90deg);
}

.retro-tree-count {
    font-size: 10px;
    color: #888;
}

.retro-tree-children {
    margin-left: 16px;
    margin-top: 2px;
}

.retro-tree-children.hidden {
    display: none;
}

.retro-tree-children .retro-tree-content {
    padding: 2px 4px;
}

.retro-sidebar-footer {
    padding: 8px 12px;
    border-top: 1px solid #333;
    font-size: 10px;
}

.retro-stats-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 2px;
}

.retro-stats-label {
    color: #888;
}

.retro-stats-value {
    color: #00ff00;
    font-weight: bold;
}

/* Content Panel */
.retro-content-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
}

/* Status Bar */
.retro-status-bar {
    background: #1a1a1a;
    border-bottom: 1px solid #333;
    padding: 4px 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 10px;
    color: #888;
}

.retro-status-left,
.retro-status-right {
    display: flex;
    gap: 16px;
}

/* Posts List */
.retro-posts-list {
    flex: 1;
    overflow-y: auto;
}

.retro-list-header {
    display: grid;
    grid-template-columns: 30px 2fr 1fr 1fr 80px;
    gap: 8px;
    background: #1a1a1a;
    padding: 8px;
    border-bottom: 1px solid #00ff00;
    font-size: 10px;
    font-weight: bold;
    color: #00ff00;
    text-transform: uppercase;
    position: sticky;
    top: 0;
    z-index: 10;
}

.retro-posts-items {
    padding: 4px;
}

.retro-post-item {
    display: grid;
    grid-template-columns: 30px 2fr 1fr 1fr 80px;
    gap: 8px;
    padding: 6px 8px;
    border-bottom: 1px solid #222;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 11px;
}

.retro-post-item:hover {
    background: rgba(0, 255, 0, 0.05);
}

.retro-post-item.selected {
    background: rgba(0, 255, 0, 0.15);
    border-color: #00ff00;
}

/* Checkbox */
.retro-checkbox {
    width: 14px;
    height: 14px;
    border: 1px solid #333;
    background: #0a0a0a;
    cursor: pointer;
}

.retro-checkbox:checked {
    background: #00ff00;
    border-color: #00ff00;
}

/* Post Item Details */
.retro-post-title {
    color: #00ff00;
    font-weight: bold;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.retro-post-meta {
    font-size: 9px;
    color: #888;
    margin-top: 1px;
}

.retro-post-status {
    font-size: 9px;
    font-weight: bold;
    text-transform: uppercase;
}

.retro-status-published {
    color: #00ff00;
}

.retro-status-draft {
    color: #ffaa00;
}

.retro-status-scheduled {
    color: #00aaff;
}

.retro-post-modified,
.retro-post-size {
    font-size: 9px;
    color: #888;
}

/* Grid Views */
.retro-posts-grid {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
}

.retro-grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 12px;
}

.retro-grid-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 12px;
    border: 1px solid #333;
    cursor: pointer;
    transition: all 0.2s;
    background: #0a0a0a;
}

.retro-grid-item:hover {
    border-color: #00ff00;
    background: rgba(0, 255, 0, 0.05);
}

.retro-grid-item.selected {
    border-color: #00ff00;
    background: rgba(0, 255, 0, 0.1);
}

.retro-grid-icon {
    font-size: 32px;
    margin-bottom: 8px;
}

.retro-grid-name {
    font-size: 10px;
    color: #00ff00;
    text-align: center;
    word-break: break-all;
}

.retro-grid-meta {
    font-size: 8px;
    color: #888;
    margin-top: 2px;
}

/* Large Icons View */
.large-icons-view .retro-grid-container {
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
}

/* Medium Icons View */
.medium-icons-view .retro-grid-container {
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
}

.medium-icons-view .retro-grid-icon {
    font-size: 24px;
}

/* Details View */
.details-view .retro-list-header {
    grid-template-columns: 30px 2fr 1fr 1fr 1fr 60px 1fr;
}

.details-view .retro-post-item {
    grid-template-columns: 30px 2fr 1fr 1fr 1fr 60px 1fr;
}

.retro-post-category,
.retro-post-author,
.retro-post-views {
    font-size: 9px;
    color: #888;
}

/* Context Menu */
.retro-context-menu {
    position: absolute;
    background: #0a0a0a;
    border: 1px solid #00ff00;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
    min-width: 150px;
    z-index: 1000;
    font-size: 11px;
}

.retro-context-header {
    background: #1a1a1a;
    padding: 4px 8px;
    color: #00ff00;
    font-weight: bold;
    border-bottom: 1px solid #00ff00;
}

.retro-context-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px 8px;
    cursor: pointer;
    color: #00ff00;
    transition: background 0.2s;
}

.retro-context-item:hover {
    background: rgba(0, 255, 0, 0.1);
}

.retro-context-danger:hover {
    background: rgba(255, 0, 0, 0.1);
    color: #ff4444;
}

.retro-context-icon {
    width: 16px;
    text-align: center;
}

.retro-context-text {
    flex: 1;
}

.retro-context-separator {
    height: 1px;
    background: #333;
    margin: 2px 0;
}

/* Utility Classes */
.hidden {
    display: none !important;
}

/* Scrollbar Styling */
.retro-posts-container::-webkit-scrollbar,
.retro-tree-view::-webkit-scrollbar,
.retro-posts-list::-webkit-scrollbar,
.retro-posts-grid::-webkit-scrollbar {
    width: 8px;
}

.retro-posts-container::-webkit-scrollbar-track,
.retro-tree-view::-webkit-scrollbar-track,
.retro-posts-list::-webkit-scrollbar-track,
.retro-posts-grid::-webkit-scrollbar-track {
    background: #0a0a0a;
}

.retro-posts-container::-webkit-scrollbar-thumb,
.retro-tree-view::-webkit-scrollbar-thumb,
.retro-posts-list::-webkit-scrollbar-thumb,
.retro-posts-grid::-webkit-scrollbar-thumb {
    background: #00ff00;
    border-radius: 4px;
}

.retro-posts-container::-webkit-scrollbar-thumb:hover,
.retro-tree-view::-webkit-scrollbar-thumb:hover,
.retro-posts-list::-webkit-scrollbar-thumb:hover,
.retro-posts-grid::-webkit-scrollbar-thumb:hover {
    background: #88ff88;
}

/* Responsive Design */
@media (max-width: 768px) {
    .retro-main-panel {
        flex-direction: column;
    }
    
    .retro-sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid #00ff00;
    }
    
    .retro-list-header,
    .retro-post-item {
        grid-template-columns: 25px 2fr 1fr 1fr 60px;
        font-size: 9px;
    }
    
    .retro-nav-bar {
        flex-direction: column;
        gap: 8px;
    }
    
    .retro-search-input {
        width: 150px;
    }
}
</style>

<script>
// Blog Posts Explorer - Windows File Explorer Style
let currentViewMode = 'list';
let selectedItems = new Set();
let allPosts = [];
let currentFolder = 'all';
let searchTerm = '';

function initBlogPosts() {
    loadPostsData();
    setupEventListeners();
    setupContextMenu();
    setupKeyboardShortcuts();
}

async function loadPostsData() {
    try {
        const response = await fetch('/api/admin/blog/posts');
        if (response.ok) {
            const data = await response.json();
            allPosts = data.posts || [];
            updateSidebarCounts(data.stats);
            renderCurrentView();
        } else {
            showFallbackPostsData();
        }
    } catch (error) {
        console.error('Error loading posts data:', error);
        showFallbackPostsData();
    }
}

function updateSidebarCounts(stats) {
    document.getElementById('allPostsCount').textContent = stats.totalPosts || 0;
    document.getElementById('publishedCount').textContent = stats.publishedCount || 0;
    document.getElementById('draftCount').textContent = stats.draftCount || 0;
    document.getElementById('scheduledCount').textContent = stats.scheduledCount || 0;
    document.getElementById('totalPostsCount').textContent = stats.totalPosts || 0;

    // Update categories and tags trees
    renderCategoriesTree(stats.categories || []);
    renderTagsTree(stats.tags || []);
}

function renderCategoriesTree(categories) {
    const container = document.getElementById('categoriesTree');
    container.innerHTML = categories.map(category => `
        <div class="retro-tree-item" data-filter="category-${category.id}">
            <div class="retro-tree-content">
                <i class="retro-tree-icon">üìÇ</i>
                <span class="retro-tree-text">${category.name}</span>
                <span class="retro-tree-count">${category.count}</span>
            </div>
        </div>
    `).join('');
}

function renderTagsTree(tags) {
    const container = document.getElementById('tagsTree');
    container.innerHTML = tags.map(tag => `
        <div class="retro-tree-item" data-filter="tag-${tag.id}">
            <div class="retro-tree-content">
                <i class="retro-tree-icon">üè∑Ô∏è</i>
                <span class="retro-tree-text">${tag.name}</span>
                <span class="retro-tree-count">${tag.count}</span>
            </div>
        </div>
    `).join('');
}

function renderCurrentView() {
    const filteredPosts = filterPosts();
    updateStatusBar(filteredPosts.length);

    switch (currentViewMode) {
        case 'list':
            renderListView(filteredPosts);
            break;
        case 'large-icons':
            renderLargeIconsView(filteredPosts);
            break;
        case 'medium-icons':
            renderMediumIconsView(filteredPosts);
            break;
        case 'details':
            renderDetailsView(filteredPosts);
            break;
    }
}

function filterPosts() {
    let filtered = allPosts;

    // Apply folder filter
    if (currentFolder !== 'all') {
        if (currentFolder.startsWith('category-')) {
            const categoryId = currentFolder.replace('category-', '');
            filtered = filtered.filter(post => post.categoryId === categoryId);
        } else if (currentFolder.startsWith('tag-')) {
            const tagId = currentFolder.replace('tag-', '');
            filtered = filtered.filter(post => post.tags && post.tags.includes(tagId));
        } else if (currentFolder.startsWith('status-')) {
            const status = currentFolder.replace('status-', '');
            filtered = filtered.filter(post => post.status === status);
        }
    }

    // Apply search filter
    if (searchTerm) {
        filtered = filtered.filter(post =>
            post.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
            post.excerpt.toLowerCase().includes(searchTerm.toLowerCase()) ||
            post.author.toLowerCase().includes(searchTerm.toLowerCase())
        );
    }

    return filtered;
}

function renderListView(posts) {
    const container = document.getElementById('postsList');
    container.innerHTML = posts.map(post => `
        <div class="retro-post-item ${selectedItems.has(post.id) ? 'selected' : ''}" data-post-id="${post.id}" onclick="selectItem('${post.id}', event)" ondblclick="openPost('${post.id}')" oncontextmenu="showContextMenu(event, '${post.id}')">
            <div>
                <input type="checkbox" class="retro-checkbox" ${selectedItems.has(post.id) ? 'checked' : ''} onchange="toggleSelection('${post.id}')">
            </div>
            <div>
                <i class="retro-tree-icon">üìÑ</i>
                <div style="display: inline-block; margin-left: 6px; vertical-align: top;">
                    <div class="retro-post-title">${post.title}</div>
                    <div class="retro-post-meta">${post.excerpt || 'No excerpt'}</div>
                </div>
            </div>
            <div>
                <span class="retro-post-status status-${post.status}">${formatStatus(post.status)}</span>
            </div>
            <div class="retro-post-modified">
                ${formatDate(post.updatedAt)}
            </div>
            <div class="retro-post-size">
                ${formatFileSize(post.contentLength || 0)}
            </div>
        </div>
    `).join('');
}

function renderLargeIconsView(posts) {
    const container = document.getElementById('largeIconsGrid');
    container.innerHTML = posts.map(post => `
        <div class="retro-grid-item ${selectedItems.has(post.id) ? 'selected' : ''}" data-post-id="${post.id}" onclick="selectItem('${post.id}', event)" ondblclick="openPost('${post.id}')" oncontextmenu="showContextMenu(event, '${post.id}')">
            <div class="retro-grid-icon">üìÑ</div>
            <div class="retro-grid-name">${post.title}</div>
            <div class="retro-grid-meta">${formatStatus(post.status)}</div>
        </div>
    `).join('');
}

function renderMediumIconsView(posts) {
    const container = document.getElementById('mediumIconsGrid');
    container.innerHTML = posts.map(post => `
        <div class="retro-grid-item ${selectedItems.has(post.id) ? 'selected' : ''}" data-post-id="${post.id}" onclick="selectItem('${post.id}', event)" ondblclick="openPost('${post.id}')" oncontextmenu="showContextMenu(event, '${post.id}')">
            <div class="retro-grid-icon">üìÑ</div>
            <div class="retro-grid-name">${post.title}</div>
        </div>
    `).join('');
}

function renderDetailsView(posts) {
    const container = document.getElementById('postsDetails');
    container.innerHTML = posts.map(post => `
        <div class="retro-post-item ${selectedItems.has(post.id) ? 'selected' : ''}" data-post-id="${post.id}" onclick="selectItem('${post.id}', event)" ondblclick="openPost('${post.id}')" oncontextmenu="showContextMenu(event, '${post.id}')">
            <div>
                <input type="checkbox" class="retro-checkbox" ${selectedItems.has(post.id) ? 'checked' : ''} onchange="toggleSelection('${post.id}')">
            </div>
            <div>
                <i class="retro-tree-icon">üìÑ</i>
                <div style="display: inline-block; margin-left: 6px; vertical-align: top;">
                    <div class="retro-post-title">${post.title}</div>
                </div>
            </div>
            <div>
                <span class="retro-post-status status-${post.status}">${formatStatus(post.status)}</span>
            </div>
            <div class="retro-post-category">
                ${post.category || 'Uncategorized'}
            </div>
            <div class="retro-post-author">
                ${post.author || 'Unknown'}
            </div>
            <div class="retro-post-views">
                ${post.views || 0}
            </div>
            <div class="retro-post-modified">
                ${formatDate(post.updatedAt)}
            </div>
        </div>
    `).join('');
}

function setViewMode(mode) {
    // Update view mode buttons
    document.querySelectorAll('.retro-view-btn').forEach(btn => {
        btn.classList.remove('active');
    });

    const activeBtn = document.querySelector(`.retro-view-btn[onclick="setViewMode('${mode}')"]`);
    if (activeBtn) {
        activeBtn.classList.add('active');
    }

    // Hide all views
    document.querySelectorAll('.large-icons-view, .medium-icons-view, .details-view').forEach(view => {
        view.classList.add('hidden');
    });

    // Show selected view
    if (mode === 'list') {
        document.querySelector('.retro-posts-list').classList.remove('hidden');
    } else {
        document.querySelector('.retro-posts-list').classList.add('hidden');
        document.getElementById(`${mode}View`).classList.remove('hidden');
    }

    currentViewMode = mode;
    updateStatusBarText();
    renderCurrentView();
}

function selectItem(postId, event) {
    if (event.ctrlKey || event.metaKey) {
        // Multi-select
        if (selectedItems.has(postId)) {
            selectedItems.delete(postId);
        } else {
            selectedItems.add(postId);
        }
    } else if (event.shiftKey) {
        // Range select (simplified)
        selectedItems.clear();
        selectedItems.add(postId);
    } else {
        // Single select
        selectedItems.clear();
        selectedItems.add(postId);
    }

    updateSelectionUI();
}

function toggleSelection(postId) {
    if (selectedItems.has(postId)) {
        selectedItems.delete(postId);
    } else {
        selectedItems.add(postId);
    }
    updateSelectionUI();
}

function updateSelectionUI() {
    // Update checkboxes
    document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
        const postId = checkbox.closest('[data-post-id]').dataset.postId;
        checkbox.checked = selectedItems.has(postId);
    });

    // Update visual selection
    document.querySelectorAll('[data-post-id]').forEach(item => {
        const postId = item.dataset.postId;
        if (selectedItems.has(postId)) {
            item.classList.add('selected');
        } else {
            item.classList.remove('selected');
        }
    });

    updateStatusBar(selectedItems.size);
}

function updateStatusBar(itemCount) {
    document.getElementById('itemsCount').textContent = `${itemCount} item${itemCount !== 1 ? 's' : ''}`;
    document.getElementById('selectedCount').textContent = selectedItems.size;
    document.getElementById('selectedItemsInfo').textContent = `${selectedItems.size} selected`;
}

function updateStatusBarText() {
    const viewNames = {
        'list': 'List view',
        'large-icons': 'Large icons view',
        'medium-icons': 'Medium icons view',
        'details': 'Details view'
    };
    document.getElementById('viewInfo').textContent = viewNames[currentViewMode] || 'List view';
}

function toggleTreeItem(element) {
    const children = element.querySelector('.tree-children');
    const arrow = element.querySelector('.tree-arrow');

    if (children.classList.contains('hidden')) {
        children.classList.remove('hidden');
        element.classList.add('expanded');
        arrow.classList.add('rotate-90');
    } else {
        children.classList.add('hidden');
        element.classList.remove('expanded');
        arrow.classList.remove('rotate-90');
    }
}

function setupEventListeners() {
    // Search
    document.getElementById('searchInput').oninput = debounce((e) => {
        searchTerm = e.target.value;
        renderCurrentView();
    }, 300);

    // Tree navigation
    document.addEventListener('click', (e) => {
        const treeItem = e.target.closest('.retro-tree-item[data-filter]');
        if (treeItem) {
            const filter = treeItem.dataset.filter;
            navigateToFolder(filter);
        }
    });
}

function navigateToFolder(folder) {
    currentFolder = folder;

    // Update active tree item
    document.querySelectorAll('.retro-tree-item').forEach(item => item.classList.remove('active'));
    document.querySelector(`[data-filter="${folder}"]`)?.classList.add('active');

    // Update path display
    updatePathDisplay(folder);

    renderCurrentView();
}

function updatePathDisplay(folder) {
    const pathBar = document.querySelector('.retro-path-bar');
    let pathText = 'BLOG POSTS\\ALL POSTS';

    if (folder.startsWith('category-')) {
        const categoryName = folder.replace('category-', '');
        pathText = `BLOG POSTS\\CATEGORIES\\${categoryName}`;
    } else if (folder.startsWith('tag-')) {
        const tagName = folder.replace('tag-', '');
        pathText = `BLOG POSTS\\TAGS\\${tagName}`;
    } else if (folder.startsWith('status-')) {
        const statusName = folder.replace('status-', '').charAt(0).toUpperCase() + folder.replace('status-', '').slice(1);
        pathText = `BLOG POSTS\\STATUS\\${statusName}`;
    }

    pathBar.innerHTML = pathText.split('\\\\').map((part, index) => {
        if (index === pathText.split('\\\\').length - 1) {
            return `<span class="retro-path-text" style="color: #00ff00; font-weight: bold;">${part}</span>`;
        }
        return `<span class="retro-path-text">${part}</span><span class="retro-path-separator">\\\\</span>`;
    }).join('');
}

function setupContextMenu() {
    document.addEventListener('contextmenu', (e) => {
        const item = e.target.closest('[data-post-id]');
        if (item) {
            e.preventDefault();
            const postId = item.dataset.postId;
            showContextMenu(e, postId);
        }
    });

    // Hide context menu on click outside
    document.addEventListener('click', () => {
        document.getElementById('contextMenu').classList.add('hidden');
    });
}

function showContextMenu(event, postId) {
    event.preventDefault();
    const menu = document.getElementById('contextMenu');

    // Select the item if not already selected
    if (!selectedItems.has(postId)) {
        selectedItems.clear();
        selectedItems.add(postId);
        updateSelectionUI();
    }

    menu.style.left = `${event.pageX}px`;
    menu.style.top = `${event.pageY}px`;
    menu.classList.remove('hidden');
}

function setupKeyboardShortcuts() {
    document.addEventListener('keydown', (e) => {
        // Ctrl+A to select all
        if (e.ctrlKey && e.key === 'a') {
            e.preventDefault();
            selectAll();
        }

        // Delete key to delete selected
        if (e.key === 'Delete') {
            deleteSelected();
        }

        // F2 to rename/edit
        if (e.key === 'F2') {
            e.preventDefault();
            if (selectedItems.size === 1) {
                editPost();
            }
        }

        // Ctrl+C to copy
        if (e.ctrlKey && e.key === 'c') {
            copyItems();
        }

        // Ctrl+X to cut
        if (e.ctrlKey && e.key === 'x') {
            cutItems();
        }

        // Ctrl+V to paste
        if (e.ctrlKey && e.key === 'v') {
            pasteItems();
        }
    });
}

function selectAll() {
    const visibleItems = document.querySelectorAll('[data-post-id]');
    selectedItems.clear();
    visibleItems.forEach(item => {
        selectedItems.add(item.dataset.postId);
    });
    updateSelectionUI();
}

function formatStatus(status) {
    return status.charAt(0).toUpperCase() + status.slice(1);
}

function formatDate(dateString) {
    const date = new Date(dateString);
    const now = new Date();
    const diff = now - date;
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));

    if (days === 0) return 'Today';
    if (days === 1) return 'Yesterday';
    if (days < 7) return `${days} days ago`;
    if (days < 30) return `${Math.floor(days / 7)} weeks ago`;

    return date.toLocaleDateString();
}

function formatFileSize(bytes) {
    if (bytes === 0) return '0 B';
    const k = 1024;
    const sizes = ['B', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
}

function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

function showFallbackPostsData() {
    // Show sample data when API is not available
    updateSidebarCounts({
        totalPosts: 24,
        publishedCount: 18,
        draftCount: 4,
        scheduledCount: 2
    });

    // Sample posts
    allPosts = [
        {
            id: '1',
            title: 'Getting Started with React',
            excerpt: 'Learn the basics of React development',
            status: 'published',
            author: 'NekwasaR',
            category: 'Technology',
            updatedAt: '2024-01-15T10:30:00Z',
            contentLength: 2456,
            views: 1250
        },
        {
            id: '2',
            title: 'Advanced CSS Techniques',
            excerpt: 'Master modern CSS with these advanced techniques',
            status: 'draft',
            author: 'NekwasaR',
            category: 'Design',
            updatedAt: '2024-01-14T09:15:00Z',
            contentLength: 1890,
            views: 0
        }
    ];

    renderCurrentView();
}

// Action functions
function newPost() { showNotification('New post modal would open here', 'info'); }
function openPost(postId) { showNotification(`Opening post ${postId}`, 'info'); }
function editPost() { showNotification('Edit post modal would open here', 'info'); }
function duplicatePost() { showNotification('Duplicate post functionality', 'info'); }
function deleteSelected() { showNotification(`Deleting ${selectedItems.size} posts`, 'info'); }
function cutItems() { showNotification('Cut functionality', 'info'); }
function copyItems() { showNotification('Copy functionality', 'info'); }
function pasteItems() { showNotification('Paste functionality', 'info'); }
function refreshView() { loadPostsData(); showNotification('View refreshed', 'success'); }
function showProperties() { showNotification('Properties modal would open here', 'info'); }
function goBack() { showNotification('Go back functionality', 'info'); }
function goForward() { showNotification('Go forward functionality', 'info'); }
function goUp() { navigateToFolder('all'); }

// Window controls (mock)
function minimizeWindow() { showNotification('Window minimized', 'info'); }
function maximizeWindow() { showNotification('Window maximized', 'info'); }
function closeWindow() { showNotification('Window closed', 'info'); }

function showNotification(message, type = 'info') {
    // TODO: Implement notification system
    console.log(`${type.toUpperCase()}: ${message}`);
}

// Initialize when page loads
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initBlogPosts);
} else {
    initBlogPosts();
}
</script>
</